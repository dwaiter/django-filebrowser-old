{% load adminmedia %}

<tr>
    <!-- Fileselect for FileBrowseField -->
    {% ifequal query.pop 'pop=1' %}
    <td class="fb_icon">
        <a href="javascript://" onclick="FileSubmit('{{ file.select_link }}', '{{ file.path_thumb }}', '{{ file.file_type }}');" class="fb_selectlink"></a>
    </td>
    {% endifequal %}
    <!-- Fileselect for RTE/TinyMCE -->
    {% ifequal query.pop 'pop=2' %}
    <td class="fb_icon">
        {% ifnotequal file.file_type 'Folder' %}
        <a href="javascript://" onclick="FileBrowserDialogue.fileSubmit('{{ file.link }}');" class="fb_selectlink"></a>
        {% endifnotequal %}
    </td>
    {% endifequal %}
    <!-- FileIcon -->
    <td class="fb_icon"><img src="{{ settings_var.PATH_FILEBROWSER_MEDIA }}img/filebrowser_{{ file.file_type }}.gif" style="margin-top: 1px;" /></td>
    <!-- Thumbnail or MakeThumbIcon -->
    {% ifnotequal counter.Image 0 %}
    {% if results_var.change_total %}
    <td class="fb_icon">
        {% if file.flag_makethumb %}
        <a href="makethumb/{{ file.filename }}/?{{ query.pop }}">
        <img src="{{ settings_var.PATH_FILEBROWSER_MEDIA }}img/filebrowser_Thumb.gif" width="{{ thumbnail_size.0 }}" style="margin: 2px;" /></a>
        {% else %}
        {% ifequal file.file_type 'Image' %}
        <a href="{{ file.link }}"><img src="{{ file.path_thumb }}" width="{{ file.thumb_dimensions.0 }}" height="{{ file.thumb_dimensions.1 }}" style="margin: 2px;" /></a>
        {% endifequal %}
        {% endif %}
    </td>
    {% endif %}
    {% endifnotequal %}
    <!-- Filename/Dimensions -->
    {% ifequal file.file_type 'Folder' %}
    <td><b><a href="{{ file.link }}/{{ query.query_str_total }}">{{ file.filename }}</a></b></td>
    {% else %}
    <td><b><a href="{{ file.link }}">{{ file.filename }}</a></b>{% if file.image_dimensions %}<br /><span class="tiny">{{ file.image_dimensions.0 }} x {{ file.image_dimensions.1 }} px</span>{% endif %}</td>
    {% endifequal %}
    <!-- Size -->
    <td>{{ file.filesize_str|safe }}</td>
    <!-- Date -->
    <td>{{ file.date }}</td>
    <!-- Rename -->
    <td class="fb_icon"><a href="rename/{{ file.filename }}/?{{ query.pop }}" class="fb_renamelink"></a></td>
    <!-- Image Generator -->
    {% if settings_var.USE_IMAGE_GENERATOR %}
    {% ifnotequal counter.Image 0 %}
    <td class="fb_icon">
        {% ifequal file.file_type 'Image' %}
        <a href="generateimages/{{ file.filename }}/?{{ query.pop }}" class="fb_image_generator_link">generate images</a>
        {% endifequal %}
    </td>
    {% endifnotequal %}
    {% endif %}
    <!-- Delete -->
    {% if results_var.delete_total %}
    <td class="fb_icon">
        {% ifnotequal file.file_type 'Folder' %}
        <a href="delete/{{ query.query_str_total }}&filename={{ file.filename }}&type={{ file.file_type }}" class="fb_deletelink" onclick="return confirm('Are you sure you want to delete this file?');"></a>
        {% else %}
        {% if file.flag_deletedir %}
        <a href="delete/{{ query.query_str_total }}&filename={{ file.filename }}&type={{ file.file_type }}" class="fb_deletelink" onclick="return confirm('Are you sure you want to delete this file?');"></a>
        {% endif %}
        {% endifnotequal %}
    </td>
    {% endif %}
</tr>
 